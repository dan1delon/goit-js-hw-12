{"version":3,"file":"commonHelpers.js","sources":["../src/js/render-function.js","../src/js/pixabay-api.js","../src/main.js"],"sourcesContent":["import SimpleLightbox from \"simplelightbox\";\nimport \"simplelightbox/dist/simple-lightbox.min.css\";\n\nconst lightbox = new SimpleLightbox('.card a', {\n   captions: true,\n   captionsData: 'alt',\n}); \n\nconst gallery = document.querySelector('.gallery');\n\nexport function render(images) {\n    const markup = images.hits.map(image => template(image)).join('');\n    gallery.insertAdjacentHTML('beforeend', markup);\n    lightbox.refresh();\n}\n\nfunction template({webformatURL, tags, likes, views, comments, downloads, largeImageURL}) {\n    return `<li class=\"card\">\n      <a class=\"link\" href=\"${largeImageURL}\">\n        <img src=\"${webformatURL}\" alt=\"${tags}\" class=\"image\">\n        <div class=\"container\">\n          <div class=\"content\">\n            <h4 class=\"name\">Likes</h4>\n            <p class=\"description\">${likes}</p>\n          </div>\n          <div class=\"content\">\n            <h4 class=\"name\">Views</h4>\n            <p class=\"description\">${views}</p>\n          </div>\n          <div class=\"content\">\n            <h4 class=\"name\">Comments</h4>\n            <p class=\"description\">${comments}</p>\n          </div>\n          <div class=\"content\">\n            <h4 class=\"name\">Downloads</h4>\n            <p class=\"description\">${downloads}</p>\n          </div>\n        </div>\n      </a>\n    </li>`\n}","import axios from 'axios';\n\nexport async function getImages(query, page) {\n\n    const newParams = {\n        key: '6682685-2020f07934f1586c5464d55ac',\n        q: query,\n        image_type: 'photo',\n        orientation: 'horizontal',\n        safesearch: true,\n        per_page: 15,\n        page,\n    };\n\n     const {data} = await axios.get('https://pixabay.com/api/', {\n            params: newParams\n     });\n    return data;\n}\n","import { render } from \"./js/render-function\";\nimport iziToast from 'izitoast';\nimport 'izitoast/dist/css/iziToast.min.css'; \n    \nimport { getImages } from './js/pixabay-api';\n\nconst form = document.querySelector('form');\nconst gallery = document.querySelector('.gallery');\nconst loader = document.querySelector('.loader');\nconst btnLoadMore = document.querySelector('.btn-load-more');\n\nform.addEventListener('submit', searchPhoto);\nbtnLoadMore.addEventListener('click', loadNextpage);\n\nlet currentPage = 1;\nlet currentQuerry = '';\nlet availablePages = 0;\n\nasync function searchPhoto(e) {\n\n    showLoader();\n\n    try {  \n\n        e.preventDefault();\n        const input = e.target.elements.text.value.trim();\n        \n        if (input === '') {\n            return iziToast.error({\n                message: `Sorry, there are no images matching your search query. Please, try again!`,\n                position: \"topRight\",\n                backgroundColor: '#EF4040',\n                messageColor: '#FAFAFB',\n                theme: 'dark',\n            })\n        };\n    \n        currentQuerry = input;\n        gallery.innerHTML = '';\n        currentPage = 1;\n  \n        const data = await getImages(currentQuerry, currentPage);\n        \n        if (data.hits.length === 0) {\n            return iziToast.error({\n                message: `Sorry, there are no images matching your search query. Please, try again!`,\n                position: \"topRight\",\n                backgroundColor: '#EF4040',\n                messageColor: '#FAFAFB',\n                theme: 'dark',\n            })\n        } \n\n        availablePages = Math.ceil(data.totalHits / 15);\n        render(data);\n        form.reset(); \n        hideLoader();\n\n    } catch {\n\n        return iziToast.error({\n            message: `An error occurred while fetching data. Please try again later.`,\n            position: \"topRight\",\n            backgroundColor: '#EF4040',\n            messageColor: '#FAFAFB',\n            theme: 'dark',\n        })\n\n    } finally {\n\n        loader.classList.add('is-hidden');\n        \n    }        \n\n}\n\nasync function loadNextpage() {\n\n    showLoader();\n\n    try {\n        \n        currentPage += 1;\n  \n        const data = await getImages(currentQuerry, currentPage); \n        render(data);\n        \n    } catch {\n        \n        return iziToast.error({\n            message: `An error occurred while fetching data. Please try again later.`,\n            position: \"topRight\",\n            backgroundColor: '#EF4040',\n            messageColor: '#FAFAFB',\n            theme: 'dark',\n        })\n\n    } finally {\n\n        hideLoader();\n        window.scrollBy({\n            top: 200,\n            behavior: \"smooth\",\n        });\n\n\n        if (availablePages === currentPage) {\n            btnLoadMore.classList.add('is-hidden');\n            return iziToast.error({\n                message: \"We're sorry, but you've reached the end of search results.\",\n                position: \"topRight\",\n                backgroundColor: '#EF4040',\n                messageColor: '#FAFAFB',\n                theme: 'dark',\n            })\n        } \n\n    }        \n}\n\n// =========================================================================\n\nfunction showLoader() {\n    loader.classList.remove('is-hidden');\n    btnLoadMore.classList.add('is-hidden');\n}\n\nfunction hideLoader() {\n    loader.classList.add('is-hidden');\n    btnLoadMore.classList.remove('is-hidden');\n}\n"],"names":["lightbox","SimpleLightbox","gallery","render","images","markup","image","template","webformatURL","tags","likes","views","comments","downloads","largeImageURL","getImages","query","page","newParams","data","axios","form","loader","btnLoadMore","searchPhoto","loadNextpage","currentPage","currentQuerry","availablePages","e","showLoader","input","iziToast","hideLoader"],"mappings":"owBAGA,MAAMA,EAAW,IAAIC,EAAe,UAAW,CAC5C,SAAU,GACV,aAAc,KACjB,CAAC,EAEKC,EAAU,SAAS,cAAc,UAAU,EAE1C,SAASC,EAAOC,EAAQ,CAC3B,MAAMC,EAASD,EAAO,KAAK,IAAIE,GAASC,EAASD,CAAK,CAAC,EAAE,KAAK,EAAE,EAChEJ,EAAQ,mBAAmB,YAAaG,CAAM,EAC9CL,EAAS,QAAO,CACpB,CAEA,SAASO,EAAS,CAAC,aAAAC,EAAc,KAAAC,EAAM,MAAAC,EAAO,MAAAC,EAAO,SAAAC,EAAU,UAAAC,EAAW,cAAAC,CAAa,EAAG,CACtF,MAAO;AAAA,8BACmBA,CAAa;AAAA,oBACvBN,CAAY,UAAUC,CAAI;AAAA;AAAA;AAAA;AAAA,qCAITC,CAAK;AAAA;AAAA;AAAA;AAAA,qCAILC,CAAK;AAAA;AAAA;AAAA;AAAA,qCAILC,CAAQ;AAAA;AAAA;AAAA;AAAA,qCAIRC,CAAS;AAAA;AAAA;AAAA;AAAA,UAK9C,CCtCO,eAAeE,EAAUC,EAAOC,EAAM,CAEzC,MAAMC,EAAY,CACd,IAAK,oCACL,EAAGF,EACH,WAAY,QACZ,YAAa,aACb,WAAY,GACZ,SAAU,GACV,KAAAC,CACR,EAEW,CAAC,KAAAE,CAAI,EAAI,MAAMC,EAAM,IAAI,2BAA4B,CACpD,OAAQF,CACpB,CAAM,EACF,OAAOC,CACX,CCZA,MAAME,EAAO,SAAS,cAAc,MAAM,EACpCnB,EAAU,SAAS,cAAc,UAAU,EAC3CoB,EAAS,SAAS,cAAc,SAAS,EACzCC,EAAc,SAAS,cAAc,gBAAgB,EAE3DF,EAAK,iBAAiB,SAAUG,CAAW,EAC3CD,EAAY,iBAAiB,QAASE,CAAY,EAElD,IAAIC,EAAc,EACdC,EAAgB,GAChBC,EAAiB,EAErB,eAAeJ,EAAYK,EAAG,CAE1BC,IAEA,GAAI,CAEAD,EAAE,eAAc,EAChB,MAAME,EAAQF,EAAE,OAAO,SAAS,KAAK,MAAM,OAE3C,GAAIE,IAAU,GACV,OAAOC,EAAS,MAAM,CAClB,QAAS,4EACT,SAAU,WACV,gBAAiB,UACjB,aAAc,UACd,MAAO,MACvB,CAAa,EAGLL,EAAgBI,EAChB7B,EAAQ,UAAY,GACpBwB,EAAc,EAEd,MAAMP,EAAO,MAAMJ,EAAUY,EAAeD,CAAW,EAEvD,GAAIP,EAAK,KAAK,SAAW,EACrB,OAAOa,EAAS,MAAM,CAClB,QAAS,4EACT,SAAU,WACV,gBAAiB,UACjB,aAAc,UACd,MAAO,MACvB,CAAa,EAGLJ,EAAiB,KAAK,KAAKT,EAAK,UAAY,EAAE,EAC9ChB,EAAOgB,CAAI,EACXE,EAAK,MAAK,EACVY,GAER,MAAY,CAEJ,OAAOD,EAAS,MAAM,CAClB,QAAS,iEACT,SAAU,WACV,gBAAiB,UACjB,aAAc,UACd,MAAO,MACnB,CAAS,CAET,QAAc,CAENV,EAAO,UAAU,IAAI,WAAW,CAEnC,CAEL,CAEA,eAAeG,GAAe,CAE1BK,IAEA,GAAI,CAEAJ,GAAe,EAEf,MAAMP,EAAO,MAAMJ,EAAUY,EAAeD,CAAW,EACvDvB,EAAOgB,CAAI,CAEnB,MAAY,CAEJ,OAAOa,EAAS,MAAM,CAClB,QAAS,iEACT,SAAU,WACV,gBAAiB,UACjB,aAAc,UACd,MAAO,MACnB,CAAS,CAET,QAAc,CASN,GAPAC,IACA,OAAO,SAAS,CACZ,IAAK,IACL,SAAU,QACtB,CAAS,EAGGL,IAAmBF,EACnB,OAAAH,EAAY,UAAU,IAAI,WAAW,EAC9BS,EAAS,MAAM,CAClB,QAAS,6DACT,SAAU,WACV,gBAAiB,UACjB,aAAc,UACd,MAAO,MACvB,CAAa,CAGR,CACL,CAIA,SAASF,GAAa,CAClBR,EAAO,UAAU,OAAO,WAAW,EACnCC,EAAY,UAAU,IAAI,WAAW,CACzC,CAEA,SAASU,GAAa,CAClBX,EAAO,UAAU,IAAI,WAAW,EAChCC,EAAY,UAAU,OAAO,WAAW,CAC5C"}